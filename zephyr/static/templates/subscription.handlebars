{{! Client-side Mustache template for rendering subscriptions.}}
{{#each subscriptions}}
{{#with this}}
<tr class="subscription_row" id="subscription_{{id}}">
  <td>
    <div class="subscription_table_elem subscription_header" data-toggle="collapse" data-target="#subscription_settings_{{id}}">
      <span class="color_swatch fade {{#subscribed}}in{{/subscribed}}" style="background-color: {{color}}"></span>
      <span class="subscription_block">
      <span class="subscription_name">{{name}}</span>
      {{#if invite_only}}<i class="icon-lock"></i>{{/if}}
      </span>
      <button class="btn sub_unsub_button {{^subscribed}}btn-primary{{/subscribed}}"
              type="button" name="subscription">
        {{#subscribed}}
        Unsubscribe
        {{/subscribed}}
        {{^subscribed}}
        Subscribe
        {{/subscribed}}
      </button>
    </div>

    <div id="subscription_settings_{{id}}" class="collapse subscription_settings">
      <div class="regular_subscription_settings collapse {{#subscribed}}in{{/subscribed}}">
          <p>This is a
          {{#if invite_only}}<span class="icon-lock"></span> <b>invite-only stream</b>. Only people who have been invited can access its content, but any member of the stream can invite others.
          {{else}}<span class="icon-globe"></span> <b>public stream</b>. Anybody in your organization can join.{{/if}}
          </p>
        <span class="sub_settings_title">Settings</span>
        <ul>
          <li><div id="sub_setting_in_home_view" class="sub_setting_checkbox">
            <input class="sub_setting_control" type="checkbox" {{#if in_home_view}}checked{{/if}} />
            Include in home view</div>
          </li>
          <li><div id="sub_setting_notifications" class="sub_setting_checkbox">
            <input class="sub_setting_control" type="checkbox" {{#if notifications}}checked{{/if}} />
            Show desktop notifications for traffic on this stream
          </li>
          <li>
            <span class="sub_setting_control">
              <input stream_name="{{name}}" class="colorpicker" type="text" value="{{color}}" />
            </span>
            Stream color
          </li>
        </ul>
      </div>
      {{#render_subscribers}}
      <div class="subscriber_list_settings">
        <span class="sub_settings_title">Members</span>
        <div class="subscriber_list_add">
          <form class="form-inline">
            <input type="text" name="principal" placeholder="Email address" value="" class="input-block" />
            <input type="submit" name="add_subscriber" value="Add" class="btn btn-primary" />
          </form>
        </div>
      </div>
      <div class="subscriber_list_container">
        <div class="subscriber_list_loading_indicator"></div>
        <div class="alert alert-error hide"></div>
        <div class="alert alert-warning hide"></div>
        <ul>
        </ul>
      </div>
      {{/render_subscribers}}
    </div>
  </td>
</tr>
{{/with}}
{{/each}}
